(()=>{var e={333:()=>{function e({buttonEl:e,isDark:t}){const s=t?"Change to light theme":"Change to dark theme";e.setAttribute("aria-label",s);const r=e.querySelector(".sun"),a=e.querySelector(".moon");t?(r.classList.add("hidden"),a.classList.remove("hidden")):(r.classList.remove("hidden"),a.classList.add("hidden"))}function t({theme:e}){document.querySelector("html").setAttribute("data-theme",e)}const s=document.querySelector("[data-theme-toggle]");let r=function({localStorageTheme:e,systemSettingDark:t}){return null!==e?e:t.matches?"dark":"light"}({localStorageTheme:localStorage.getItem("theme"),systemSettingDark:window.matchMedia("(prefers-color-scheme: dark)")});e({buttonEl:s,isDark:"dark"===r}),t({theme:r}),s.addEventListener("click",(a=>{const i="dark"===r?"light":"dark";localStorage.setItem("theme",i),e({buttonEl:s,isDark:"dark"===i}),t({theme:i}),r=i}))}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}(()=>{"use strict";class e{calculate(e){return Math.sqrt(e)}canCalculate(e){return e>=0}}class t{calculate(e){return Math.cbrt(e)}}class r{calculate(e){return Math.pow(e,2)}}class a{calculate(e){return Math.pow(e,3)}}class i{calculate(e){return Math.log(e)}canCalculate(e){return e>0}}class n{calculate(e){return Math.log10(e)}canCalculate(e){return e>0}}class o{calculate(e){return Math.sin(e*Math.PI/180)}}class c{calculate(e){return Math.cos(e*Math.PI/180)}}class h{calculate(e){return Math.tan(e*Math.PI/180)}}class p{calculate(e){return Math.pow(10,e)}}class l{calculate(e){let t=1;for(let s=2;s<=e;s++)t*=s;return t}canCalculate(e){return e>=0&&Number.isInteger(e)}}class d{calculate(e){return 1/e}canCalculate(e){return 0!==e&&!isNaN(e)}}class u{calculate(e){return e*Math.PI/180}}class O{calculate(e){return Math.sinh(e)}}class f{calculate(e){return Math.cosh(e)}}class y{calculate(e){return Math.tanh(e)}}class m{calculate(e){return Math.E}}class g{calculate(e=0){return(isNaN(e)||null===e)&&(e=0),0===e?1:Math.pow(Math.E,e)}canCalculate(e){return!0}}class x{constructor(e){this.memoryReference=e}calculate(e){return this.memoryReference.memory=0,0}}class w{constructor(e){this.memoryReference=e}calculate(e){return this.memoryReference.memory+=e,this.memoryReference.memory}}class D{constructor(e){this.memoryReference=e}calculate(e){return this.memoryReference.memory-=e,this.memoryReference.memory}}class ${constructor(e){this.memoryReference=e}calculate(e){return this.memoryReference.memory}}class v{constructor(s){this.operators=new Map,this.operators.set("√x",new e),this.operators.set("3√x",new t),this.operators.set("x2",new r),this.operators.set("x3",new a),this.operators.set("ln",new i),this.operators.set("log10",new n),this.operators.set("sin",new o),this.operators.set("cos",new c),this.operators.set("tan",new h),this.operators.set("10x",new p),this.operators.set("x!",new l),this.operators.set("1/x",new d),this.operators.set("Rad",new u),this.operators.set("sinh",new O),this.operators.set("cosh",new f),this.operators.set("tanh",new y),this.operators.set("e",new m),this.operators.set("ex",new g),this.operators.set("mc",new x(s)),this.operators.set("m+",new w(s)),this.operators.set("m-",new D(s)),this.operators.set("mr",new $(s))}getOperator(e){return this.operators.get(e)}hasOperator(e){return this.operators.has(e)}}class b{calculate(e,t){return e+t}}class R{calculate(e,t){return e-t}}class S{calculate(e,t){return e*t}}class M{calculate(e,t){return 0!==t?e/t:"Ошибка"}canCalculate(e,t){return 0!==t}}class C{calculate(e,t){return e**(1/t)}canCalculate(e,t){return t%2!=0||e>=0}}class k{calculate(e,t){return Math.pow(e,t)}canCalculate(e,t){return!(0===e&&0===t||e<0&&!Number.isInteger(t))}}class E{calculate(e,t){return e*Math.pow(10,t)}}class N{constructor(){this.operators=new Map,this.operators.set("+",new b),this.operators.set("-",new R),this.operators.set("×",new S),this.operators.set("÷",new M),this.operators.set("y√x",new C),this.operators.set("xy",new k),this.operators.set("EE",new E)}getOperator(e){return this.operators.get(e)}hasOperator(e){return this.operators.has(e)}}class F{constructor(e,t){this.digit=e,this.receiver=t}execute(){this.receiver.inputDigit(this.digit)}}class I{constructor(e){this.receiver=e}execute(){this.receiver.inputDecimal()}}class L{constructor(e,t){this.operator=e,this.receiver=t}execute(){this.receiver.inputOperator(this.operator)}}class q{constructor(e,t){this.operator=e,this.receiver=t}execute(){this.receiver.handleSingleOperandOperator(this.operator)}}class P{constructor(e){this.receiver=e}execute(){this.receiver.executeOperation()}}class A{constructor(e){this.receiver=e}execute(){this.receiver.clear()}}class _{constructor(e){this.receiver=e}execute(){this.receiver.toggleSign()}}class T{constructor(e){this.receiver=e}execute(){this.receiver.deleteLastDigit()}}class B{constructor(e){this.receiver=e}execute(){this.receiver.handlePercentage()}}s(333);const j=document.querySelector(".display"),z=document.querySelectorAll(".buttons button"),G=new class{constructor(e){this.firstOperand="",this.operator="",this.secondOperand="",this.shouldResetDisplay=!1,this.memory=0,this.display=e;const t={get memory(){return this._calculator.memory},set memory(e){this._calculator.memory=e},_calculator:this};this.unaryOperatorRegistry=new v(t),this.binaryOperatorRegistry=new N}updateDisplay(e){this.display&&(this.display.textContent=e.toString())}clear(){this.firstOperand="",this.secondOperand="",this.operator="",this.shouldResetDisplay=!1,this.updateDisplay("0")}deleteLastDigit(){this.shouldResetDisplay||(this.operator?this.secondOperand&&(this.secondOperand=this.secondOperand.length>1?this.secondOperand.slice(0,-1):"",this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`)):(this.firstOperand&&(this.firstOperand=this.firstOperand.length>1?this.firstOperand.slice(0,-1):""),this.updateDisplay(this.firstOperand||"0")))}toggleSign(){this.operator?this.secondOperand&&("-"===this.secondOperand[0]?this.secondOperand=this.secondOperand.substring(1):this.secondOperand="-"+this.secondOperand,this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`)):this.firstOperand&&("-"===this.firstOperand[0]?this.firstOperand=this.firstOperand.substring(1):this.firstOperand="-"+this.firstOperand,this.updateDisplay(this.firstOperand))}handlePercentage(){if(this.firstOperand&&!this.operator){const e=parseFloat(this.firstOperand)/100;this.firstOperand=e.toString(),this.updateDisplay(this.firstOperand)}if(this.secondOperand&&this.operator){const e=parseFloat(this.firstOperand)*parseFloat(this.secondOperand)/100;this.secondOperand=e.toString(),this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`)}}handleDoubleOperandOperator(e=!1){if(!this.firstOperand||!this.secondOperand)return;const t=parseFloat(this.firstOperand),s=parseFloat(this.secondOperand),r=this.binaryOperatorRegistry.getOperator(this.operator);if(!r)return void this.updateDisplay("неизвестная операция");if(r.canCalculate&&!r.canCalculate(t,s))return void this.updateDisplay("Ошибка");const a=r.calculate(t,s);if(null!=a){let t=a;"number"!=typeof t||Number.isInteger(t)||(t=parseFloat(t.toFixed(4)));const s="number"==typeof t?t.toString():String(t);this.firstOperand=s,this.secondOperand="",e?this.updateDisplay(`${s} ${this.operator}`):(this.operator="",this.updateDisplay(s))}}inputDigit(e){("0"!==e||"0"!==this.firstOperand||this.operator)&&(this.shouldResetDisplay&&(this.firstOperand="",this.operator="",this.secondOperand="",this.shouldResetDisplay=!1),this.operator?(this.secondOperand?this.secondOperand=`${this.secondOperand}${e}`:this.secondOperand=e,this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`)):(this.firstOperand?this.firstOperand=`${this.firstOperand}${e}`:this.firstOperand=e,this.updateDisplay(this.firstOperand)))}inputDecimal(){this.shouldResetDisplay&&(this.firstOperand="0",this.operator="",this.shouldResetDisplay=!1),this.operator?(this.secondOperand||(this.secondOperand="0"),this.secondOperand.includes(".")||(this.secondOperand=`${this.secondOperand}.`,this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`))):(this.firstOperand||(this.firstOperand="0"),this.firstOperand.includes(".")||(this.firstOperand=`${this.firstOperand}.`,this.updateDisplay(this.firstOperand)))}inputOperator(e){if(this.firstOperand){if(this.shouldResetDisplay)return this.shouldResetDisplay=!1,this.operator=e,this.secondOperand="",void this.updateDisplay(`${this.firstOperand} ${this.operator}`);if(this.operator&&!this.secondOperand)return this.operator=e,void this.updateDisplay(`${this.firstOperand} ${this.operator}`);if(this.operator&&this.secondOperand){const t=this.operator,s=parseFloat(this.firstOperand),r=parseFloat(this.secondOperand),a=this.binaryOperatorRegistry.getOperator(t);if(!a)return void this.updateDisplay("неизвестная операция");if(a.canCalculate&&!a.canCalculate(s,r))return void this.updateDisplay("Ошибка");const i=a.calculate(s,r);if(null!=i){let t=i;"number"!=typeof t||Number.isInteger(t)||(t=parseFloat(t.toFixed(4))),this.firstOperand="number"==typeof t?t.toString():String(t),this.operator=e,this.secondOperand="",this.operator?this.secondOperand?this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`):this.updateDisplay(`${this.firstOperand} ${this.operator}`):this.updateDisplay(this.firstOperand||"0"),this.shouldResetDisplay=!1}}else this.operator=e,this.operator?this.secondOperand?this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`):this.updateDisplay(`${this.firstOperand} ${this.operator}`):this.updateDisplay(this.firstOperand||"0")}}handleSingleOperandOperator(e){const t=parseFloat(this.firstOperand),s=this.unaryOperatorRegistry.getOperator(e);if(!s)return void this.updateDisplay("неизвестная команда");if(s.canCalculate&&!s.canCalculate(t))return void this.updateDisplay("Ошибка");const r=s.calculate(t);if(null!=r){let e=r,t="";"number"==typeof e?(Number.isInteger(e)||(e=parseFloat(e.toFixed(4))),t=e.toString()):t="string"==typeof e?e:String(e),this.firstOperand="number"==typeof e?e.toString():"",this.updateDisplay(this.firstOperand)}}executeOperation(e){e?this.handleSingleOperandOperator(e):this.operator&&this.secondOperand&&(this.handleDoubleOperandOperator(!1),this.shouldResetDisplay=!0)}}(j),H=["+","-","×","÷","y√x","xy","EE"],J=["mc","m+","m-","mr","x2","x3","ex","10x","1/x","√x","3√x","ln","log10","x!","sin","cos","tan","e","Rad","sinh","cosh","tanh"];function K(e){var t;const s=(null===(t=e.target.textContent)||void 0===t?void 0:t.trim())||"";isNaN(Number(s))?[",","."].includes(s)?new I(G).execute():"π"===s?function(e){const t=Math.PI.toString();e.operator?(e.secondOperand,e.secondOperand=t,e.updateDisplay(`${e.firstOperand} ${e.operator} ${e.secondOperand}`)):(e.firstOperand=t,e.updateDisplay(e.firstOperand))}(G):H.includes(s)?new L(s,G).execute():J.includes(s)?new q(s,G).execute():"="===s?new P(G).execute():"AC"===s?new A(G).execute():"±"===s?new _(G).execute():"%"===s&&new B(G).execute():new F(s,G).execute()}z.forEach((e=>{e.addEventListener("click",K)})),document.addEventListener("keydown",(function(e){const t=e.key;isNaN(Number(t))?["+","-","*","/"].includes(t)?new L(function(e){switch(e){case"x²":return"x2";case"x³":return"x3";case"√x":return"√x";case"∛x":return"3√x";case"ex":return"ex";case"10x":return"10x";default:return e}}(t),G).execute():[",","."].includes(t)?new I(G).execute():"Enter"===t||"="===t?new P(G).execute():"Escape"===t||"Delete"===t?new A(G).execute():"Backspace"===t&&new T(G).execute():new F(t,G).execute()}))})()})();
//# sourceMappingURL=bundle.js.map