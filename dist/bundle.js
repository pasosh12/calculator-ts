(()=>{var e={333:()=>{function e({buttonEl:e,isDark:t}){const s=t?"Change to light theme":"Change to dark theme";e.setAttribute("aria-label",s);const r=e.querySelector(".sun"),i=e.querySelector(".moon");t?(r.classList.add("hidden"),i.classList.remove("hidden")):(r.classList.remove("hidden"),i.classList.add("hidden"))}function t({theme:e}){document.querySelector("html").setAttribute("data-theme",e)}const s=document.querySelector("[data-theme-toggle]");let r=function({localStorageTheme:e,systemSettingDark:t}){return null!==e?e:t.matches?"dark":"light"}({localStorageTheme:localStorage.getItem("theme"),systemSettingDark:window.matchMedia("(prefers-color-scheme: dark)")});e({buttonEl:s,isDark:"dark"===r}),t({theme:r}),s.addEventListener("click",(i=>{const a="dark"===r?"light":"dark";localStorage.setItem("theme",a),e({buttonEl:s,isDark:"dark"===a}),t({theme:a}),r=a}))}},t={};function s(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,s),a.exports}(()=>{"use strict";class e{constructor(e,t){this.digit=e,this.receiver=t}execute(){this.receiver.inputDigit(this.digit)}}class t{constructor(e){this.receiver=e}execute(){this.receiver.inputDecimal()}}class r{constructor(e,t){this.operator=e,this.receiver=t}execute(){this.receiver.inputOperator(this.operator)}}class i{constructor(e,t){this.operator=e,this.receiver=t}execute(){this.receiver.handleSingleOperandOperator(this.operator)}}class a{constructor(e){this.receiver=e}execute(){this.receiver.calculateResult()}}class n{constructor(e){this.receiver=e}execute(){this.receiver.clear()}}class h{constructor(e){this.receiver=e}execute(){this.receiver.toggleSign()}}class o{constructor(e){this.receiver=e}execute(){this.receiver.deleteLastDigit()}}class d{constructor(e){this.receiver=e}execute(){this.receiver.handlePercentage()}}s(333);const c=document.querySelector(".display"),p=document.querySelectorAll(".buttons button"),l=new class{constructor(e){this.firstOperand="",this.operator="",this.secondOperand="",this.shouldResetDisplay=!1,this.memory=0,this.display=e}updateDisplay(e){this.display&&(this.display.textContent=e.toString())}clear(){this.firstOperand="",this.secondOperand="",this.operator="",this.shouldResetDisplay=!1,this.updateDisplay("0")}deleteLastDigit(){this.shouldResetDisplay||(this.operator?this.secondOperand&&(this.secondOperand=this.secondOperand.length>1?this.secondOperand.slice(0,-1):"",this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`)):(this.firstOperand&&(this.firstOperand=this.firstOperand.length>1?this.firstOperand.slice(0,-1):""),this.updateDisplay(this.firstOperand||"0")))}toggleSign(){this.operator?this.secondOperand&&("-"===this.secondOperand[0]?this.secondOperand=this.secondOperand.substring(1):this.secondOperand="-"+this.secondOperand,this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`)):this.firstOperand&&("-"===this.firstOperand[0]?this.firstOperand=this.firstOperand.substring(1):this.firstOperand="-"+this.firstOperand,this.updateDisplay(this.firstOperand))}handlePercentage(){if(this.firstOperand&&!this.operator){const e=parseFloat(this.firstOperand)/100;this.firstOperand=e.toString(),this.updateDisplay(this.firstOperand)}if(this.secondOperand&&this.operator){const e=parseFloat(this.firstOperand)*parseFloat(this.secondOperand)/100;this.secondOperand=e.toString(),this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`)}}calculateResult(){if(!this.firstOperand||!this.secondOperand)return;const e=parseFloat(this.firstOperand),t=parseFloat(this.secondOperand);let s="";switch(this.operator){case"+":s=e+t;break;case"-":s=e-t;break;case"×":s=e*t;break;case"÷":s=0!==t?e/t:"Ошибка";break;case"y√x":s=e**(1/t);break;case"xy":s=Math.pow(e,t);break;case"e":this.operator?(this.secondOperand=Math.E.toString(),this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`)):(this.firstOperand=Math.E.toString(),this.updateDisplay(this.firstOperand));break;default:return}"number"!=typeof s||Number.isInteger(s)||(s=parseFloat(s.toFixed(2))),this.updateDisplay(s.toString()),this.shouldResetDisplay=!0,this.firstOperand="number"==typeof s?s.toString():"",this.secondOperand="",this.operator=""}inputDigit(e){("0"!==e||"0"!==this.firstOperand||this.operator)&&(this.shouldResetDisplay&&(this.firstOperand="",this.operator="",this.shouldResetDisplay=!1),this.operator?(this.secondOperand?this.secondOperand=`${this.secondOperand}${e}`:this.secondOperand=e,this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`)):(this.firstOperand?this.firstOperand=`${this.firstOperand}${e}`:this.firstOperand=e,this.updateDisplay(this.firstOperand)))}inputDecimal(){this.shouldResetDisplay&&(this.firstOperand="0",this.operator="",this.shouldResetDisplay=!1),this.operator?(this.secondOperand||(this.secondOperand="0"),this.secondOperand.includes(".")||(this.secondOperand=`${this.secondOperand}.`,this.updateDisplay(`${this.firstOperand} ${this.operator} ${this.secondOperand}`))):(this.firstOperand||(this.firstOperand="0"),this.firstOperand.includes(".")||(this.firstOperand=`${this.firstOperand}.`,this.updateDisplay(this.firstOperand)))}inputOperator(e){if(this.firstOperand){if(this.operator&&!this.secondOperand)return this.operator=e,void this.updateDisplay(`${this.firstOperand} ${this.operator}`);this.operator&&this.secondOperand?(this.calculateResult(),this.operator=e,this.secondOperand=""):this.operator=e,this.updateDisplay(`${this.firstOperand} ${this.operator}`)}}handleSingleOperandOperator(e){let t,s=parseFloat(this.firstOperand);switch(e){case"√x":case"&radic;x":if(s<0)return void this.updateDisplay("Ошибка");t=Math.sqrt(s);break;case"3√x":t=Math.cbrt(s);break;case"x2":t=Math.pow(s,2);break;case"x3":t=Math.pow(s,3);break;case"ln":if(s<=0)return void this.updateDisplay("Ошибка");t=Math.log(s);break;case"log10":if(s<=0)return void this.updateDisplay("Ошибка");t=Math.log10(s);break;case"sin":t=Math.sin(s*Math.PI/180);break;case"cos":t=Math.cos(s*Math.PI/180);break;case"tan":t=Math.tan(s*Math.PI/180);break;case"π":t=Math.PI;break;case"mc":this.memory=0;break;case"m+":this.memory+=s;break;case"m-":this.memory-=s;break;case"mr":t=this.memory;break;case"10x":t=Math.pow(10,s);break;case"x!":{if(s<0||!Number.isInteger(s))return void this.updateDisplay("Ошибка");function r(e){return 0===e||1===e?1:e*r(e-1)}t=r(s);break}case"1/x":if(0===s||isNaN(s))return void this.updateDisplay("Ошибка");t=1/s;break;case"Rad":t=s*Math.PI/180;break;case"sinh":t=Math.sinh(s);break;case"cosh":t=Math.cosh(s);break;case"tanh":t=Math.tanh(s);break;default:return void this.updateDisplay("неизвестная команда")}void 0!==t&&("number"!=typeof t||Number.isInteger(t)||(t=parseFloat(t.toFixed(4))),this.firstOperand="number"==typeof t?t.toString():"",this.updateDisplay(this.firstOperand))}}(c),u=["+","-","×","÷","y√x","xy"],O=["mc","m+","m-","mr","2nd","x2","x3","ex","10x","1/x","√x","3√x","ln","log10","x!","sin","cos","tan","e","EE","Rad","sinh","cosh","tanh","π","Rand"];function f(s){var o;const c=(null===(o=s.target.textContent)||void 0===o?void 0:o.trim())||"";isNaN(Number(c))?[",","."].includes(c)?new t(l).execute():u.includes(c)?new r(c,l).execute():O.includes(c)?new i(c,l).execute():"="===c?new a(l).execute():"AC"===c?new n(l).execute():"±"===c?new h(l).execute():"%"===c&&new d(l).execute():new e(c,l).execute()}p.forEach((e=>{e.addEventListener("click",f)})),document.addEventListener("keydown",(function(s){const i=s.key;isNaN(Number(i))?["+","-","*","/"].includes(i)?new r(function(e){switch(e){case"/":return"÷";case"*":return"×";default:return e}}(i),l).execute():[",","."].includes(i)?new t(l).execute():"Enter"===i||"="===i?new a(l).execute():"Escape"===i||"Delete"===i?new n(l).execute():"Backspace"===i&&new o(l).execute():new e(i,l).execute()}))})()})();
//# sourceMappingURL=bundle.js.map